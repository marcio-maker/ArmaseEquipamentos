<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Batman Weapons 3D</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #000;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
        }
        canvas {
            display: block;
        }
        #ui {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 100;
        }
        .weapon-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 2px solid #ffcc00;
            background: rgba(20, 20, 30, 0.8);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #ffcc00;
            transition: all 0.3s;
        }
        .weapon-btn:hover {
            background: rgba(255, 204, 0, 0.2);
            transform: scale(1.1);
        }
        .weapon-btn.active {
            background: #ffcc00;
            color: #000;
            transform: scale(1.15);
            box-shadow: 0 0 20px #ffcc00;
        }
        #controls {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 100;
        }
        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid #ffcc00;
            background: rgba(20, 20, 30, 0.8);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: #ffcc00;
            transition: all 0.3s;
        }
        .control-btn:hover {
            background: rgba(255, 204, 0, 0.2);
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            animation: fadeIn 0.3s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            border: 2px solid #ffcc00;
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 0 40px rgba(255, 204, 0, 0.3);
            animation: slideIn 0.4s;
        }
        @keyframes slideIn {
            from { transform: translate(-50%, -60%); opacity: 0; }
            to { transform: translate(-50%, -50%); opacity: 1; }
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .modal-icon {
            font-size: 40px;
            color: #ffcc00;
        }
        .modal-title {
            font-size: 28px;
            color: #ffcc00;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
        }
        .close-modal {
            background: none;
            border: none;
            color: #ffcc00;
            font-size: 30px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        .close-modal:hover {
            background: rgba(255, 204, 0, 0.2);
            transform: rotate(90deg);
        }
        .modal-body {
            color: #ffffff;
            font-size: 16px;
            line-height: 1.6;
            text-align: center;
            padding: 20px 0;
            border-top: 1px solid rgba(255, 204, 0, 0.3);
            border-bottom: 1px solid rgba(255, 204, 0, 0.3);
            margin: 20px 0;
        }
        .modal-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }
        .stat {
            text-align: center;
        }
        .stat-value {
            color: #ffcc00;
            font-size: 24px;
            font-weight: bold;
        }
        .stat-label {
            color: #888;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .modal-footer {
            text-align: center;
            margin-top: 20px;
            color: #666;
            font-size: 14px;
        }
        .info-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 204, 0, 0.9);
            border: none;
            color: #000;
            font-size: 24px;
            cursor: pointer;
            z-index: 100;
            transition: all 0.3s;
        }
        .info-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255, 204, 0, 0.7);
        }
    </style>
</head>
<body>
    <button class="info-btn" id="infoBtn">‚Ñπ</button>
    
    <div id="controls">
        <button class="control-btn" id="rotateBtn">‚Üª</button>
        <button class="control-btn" id="resetBtn">‚ü≤</button>
    </div>
    
    <div id="ui">
        <button class="weapon-btn active" data-id="0">ü¶á</button>
        <button class="weapon-btn" data-id="1">ü™ù</button>
        <button class="weapon-btn" data-id="2">‚ú±</button>
        <button class="weapon-btn" data-id="3">üí®</button>
        <button class="weapon-btn" data-id="4">üì°</button>
        <button class="weapon-btn" data-id="5">‚ùÑÔ∏è</button>
        <button class="weapon-btn" data-id="6">üí•</button>
        <button class="weapon-btn" data-id="7">‚ö°</button>
    </div>

    <div id="weaponModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-icon" id="modalIcon">ü¶á</div>
                <h2 class="modal-title" id="modalTitle">BATARANG</h2>
                <button class="close-modal" id="closeModal">√ó</button>
            </div>
            <div class="modal-body" id="modalDescription">
                A arma de arremesso ic√¥nica do Batman em forma de morcego.
            </div>
            <div class="modal-stats">
                <div class="stat">
                    <div class="stat-value" id="statDamage">80%</div>
                    <div class="stat-label">Dano</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="statAccuracy">95%</div>
                    <div class="stat-label">Precis√£o</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="statStealth">70%</div>
                    <div class="stat-label">Furtividade</div>
                </div>
            </div>
            <div class="modal-footer">
                Arsenal do Cavaleiro das Trevas
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    
    <script>
        let scene, camera, renderer, controls;
        let currentWeapon = null;
        let autoRotate = true;
        let weapons = [];
        let time = 0;

        const weaponData = [
            {
                icon: "ü¶á",
                name: "BATARANG",
                description: "A arma de arremesso ic√¥nica do Batman. Feita de uma liga met√°lica especial, pode ser arremessada com precis√£o para atordoar, desarmar ou cortar objetos √† dist√¢ncia. Retorna ao lan√ßador como um bumerangue.",
                stats: { damage: 80, accuracy: 95, stealth: 70 }
            },
            {
                icon: "ü™ù",
                name: "GRAPPLING HOOK",
                description: "Gancho de escalada de alta tecnologia. Dispara um cabo super-resistente que permite ao Batman escalar edif√≠cios rapidamente ou se balan√ßar entre pr√©dios. O motor de retra√ß√£o √© silencioso e potente.",
                stats: { damage: 30, accuracy: 90, stealth: 85 }
            },
            {
                icon: "‚ú±",
                name: "BAT-CLAW",
                description: "Garra pneum√°tica presa ao pulso. Capaz de agarrar objetos √† dist√¢ncia, escalar superf√≠cies verticais ou puxar inimigos. A garra tem for√ßa suficiente para arrancar portas de ve√≠culos.",
                stats: { damage: 65, accuracy: 85, stealth: 60 }
            },
            {
                icon: "üí®",
                name: "SMOKE PELLET",
                description: "Granada de fuma√ßa compacta. Cria uma densa nuvem de fuma√ßa em segundos, permitindo que Batman desapare√ßa rapidamente ou crie distra√ß√µes. A fuma√ßa tamb√©m bloqueia vis√£o infravermelha.",
                stats: { damage: 10, accuracy: 100, stealth: 95 }
            },
            {
                icon: "üì°",
                name: "SONIC EMITTER",
                description: "Dispositivo que emite frequ√™ncias sonoras espec√≠ficas. Pode desorientar inimigos, quebrar vidros √† dist√¢ncia ou ativar/desativar equipamentos eletr√¥nicos sens√≠veis.",
                stats: { damage: 40, accuracy: 75, stealth: 50 }
            },
            {
                icon: "‚ùÑÔ∏è",
                name: "FREEZE GRENADE",
                description: "Granada criog√™nica que congela instantaneamente tudo em um raio de 5 metros. Usada para imobilizar inimigos, criar plataformas sobre √°gua ou desativar m√°quinas.",
                stats: { damage: 70, accuracy: 80, stealth: 40 }
            },
            {
                icon: "üí•",
                name: "EXPLOSIVE GEL",
                description: "Gel explosivo aplicador. Pode ser aplicado em qualquer superf√≠cie e detonado remotamente. Usado para criar aberturas estrat√©gicas em paredes ou desativar ve√≠culos.",
                stats: { damage: 90, accuracy: 85, stealth: 55 }
            },
            {
                icon: "‚ö°",
                name: "EMP DEVICE",
                description: "Dispositivo de Pulso Eletromagn√©tico port√°til. Desativa toda eletr√¥nica em um raio de 50 metros, incluindo armas, ve√≠culos e sistemas de seguran√ßa, sem causar danos permanentes.",
                stats: { damage: 50, accuracy: 95, stealth: 75 }
            }
        ];

        const weaponShapes = [
            () => createBatarang(),
            () => createGrapplingHook(),
            () => createBatClaw(),
            () => createSmokePellet(),
            () => createSonicEmitter(),
            () => createFreezeGrenade(),
            () => createExplosiveGel(),
            () => createEMPDevice()
        ];

        function init() {
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000000);

            camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 0, 12);

            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            document.body.appendChild(renderer.domElement);

            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.autoRotate = autoRotate;
            controls.autoRotateSpeed = 1.5;

            const ambientLight = new THREE.AmbientLight(0xffffff, 0.3);
            scene.add(ambientLight);

            const mainLight = new THREE.DirectionalLight(0xffcc00, 0.8);
            mainLight.position.set(10, 10, 5);
            mainLight.castShadow = true;
            scene.add(mainLight);

            const backLight = new THREE.DirectionalLight(0x0066ff, 0.4);
            backLight.position.set(-10, -10, -5);
            scene.add(backLight);

            const floorGeometry = new THREE.PlaneGeometry(50, 50);
            const floorMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x111122,
                shininess: 100
            });
            const floor = new THREE.Mesh(floorGeometry, floorMaterial);
            floor.rotation.x = -Math.PI / 2;
            floor.position.y = -4;
            floor.receiveShadow = true;
            scene.add(floor);

            const grid = new THREE.GridHelper(50, 50, 0x222233, 0x111122);
            grid.position.y = -3.99;
            scene.add(grid);

            createAllWeapons();
            showWeapon(0);

            setupEventListeners();
            animate();

            window.addEventListener('resize', onWindowResize);
        }

        function createAllWeapons() {
            weaponShapes.forEach((createFunc, index) => {
                const weapon = createFunc();
                weapon.visible = false;
                scene.add(weapon);
                weapons.push(weapon);
            });
        }

        function createBatarang() {
            const group = new THREE.Group();
            
            const wingShape = new THREE.Shape();
            wingShape.moveTo(0, 0);
            wingShape.bezierCurveTo(2, 1, 3, 0, 4, -1);
            wingShape.bezierCurveTo(3, -2, 2, -3, 0, -2);
            wingShape.bezierCurveTo(-2, -3, -3, -2, -4, -1);
            wingShape.bezierCurveTo(-3, 0, -2, 1, 0, 0);
            
            const extrudeSettings = {
                steps: 1,
                depth: 0.3,
                bevelEnabled: true,
                bevelThickness: 0.1,
                bevelSize: 0.1
            };
            
            const geometry = new THREE.ExtrudeGeometry(wingShape, extrudeSettings);
            const material = new THREE.MeshPhongMaterial({
                color: 0x333333,
                emissive: 0x222222,
                shininess: 100
            });
            
            const batarang = new THREE.Mesh(geometry, material);
            batarang.rotation.x = Math.PI / 2;
            batarang.scale.set(0.3, 0.3, 0.3);
            group.add(batarang);
            
            return group;
        }

        function createGrapplingHook() {
            const group = new THREE.Group();
            
            const baseGeometry = new THREE.CylinderGeometry(0.2, 0.2, 2, 8);
            const baseMaterial = new THREE.MeshPhongMaterial({ color: 0x444444 });
            const base = new THREE.Mesh(baseGeometry, baseMaterial);
            base.rotation.z = Math.PI / 2;
            group.add(base);
            
            const hookGeometry = new THREE.TorusGeometry(0.4, 0.08, 8, 16, Math.PI);
            const hookMaterial = new THREE.MeshPhongMaterial({ color: 0x666666 });
            const hook = new THREE.Mesh(hookGeometry, hookMaterial);
            hook.position.x = 1.2;
            hook.rotation.z = Math.PI / 2;
            group.add(hook);
            
            const tipGeometry = new THREE.SphereGeometry(0.1, 8, 8);
            const tipMaterial = new THREE.MeshPhongMaterial({ color: 0xff0000 });
            const tip = new THREE.Mesh(tipGeometry, tipMaterial);
            tip.position.x = 1.6;
            group.add(tip);
            
            group.scale.set(1.2, 1.2, 1.2);
            return group;
        }

        function createBatClaw() {
            const group = new THREE.Group();
            
            const baseGeometry = new THREE.BoxGeometry(1, 1, 0.4);
            const baseMaterial = new THREE.MeshPhongMaterial({ color: 0x222222 });
            const base = new THREE.Mesh(baseGeometry, baseMaterial);
            group.add(base);
            
            for (let i = 0; i < 3; i++) {
                const angle = (i * Math.PI * 2) / 3;
                const radius = 0.4;
                
                const clawGroup = new THREE.Group();
                
                const armGeometry = new THREE.CylinderGeometry(0.05, 0.05, 1.5, 6);
                const armMaterial = new THREE.MeshPhongMaterial({ color: 0x555555 });
                const arm = new THREE.Mesh(armGeometry, armMaterial);
                arm.rotation.z = -Math.PI / 6;
                clawGroup.add(arm);
                
                const clawGeometry = new THREE.ConeGeometry(0.08, 0.3, 6);
                const clawMaterial = new THREE.MeshPhongMaterial({ color: 0x888888 });
                const claw = new THREE.Mesh(clawGeometry, clawMaterial);
                claw.position.y = 0.75;
                claw.rotation.z = Math.PI / 2;
                clawGroup.add(claw);
                
                clawGroup.position.x = Math.cos(angle) * radius;
                clawGroup.position.z = Math.sin(angle) * radius;
                clawGroup.rotation.y = angle;
                
                group.add(clawGroup);
            }
            
            group.scale.set(1.5, 1.5, 1.5);
            return group;
        }

        function createSmokePellet() {
            const group = new THREE.Group();
            
            const sphereGeometry = new THREE.SphereGeometry(0.8, 16, 16);
            const sphereMaterial = new THREE.MeshPhongMaterial({
                color: 0x666666,
                transparent: true,
                opacity: 0.8
            });
            const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
            group.add(sphere);
            
            const linesGroup = new THREE.Group();
            for (let i = 0; i < 8; i++) {
                const lineGeometry = new THREE.CylinderGeometry(0.02, 0.1, 0.5, 4);
                const lineMaterial = new THREE.MeshPhongMaterial({ color: 0x888888 });
                const line = new THREE.Mesh(lineGeometry, lineMaterial);
                
                const angle = (i * Math.PI * 2) / 8;
                line.position.x = Math.cos(angle) * 0.6;
                line.position.z = Math.sin(angle) * 0.6;
                line.position.y = 0;
                line.rotation.x = Math.PI / 2;
                line.rotation.z = angle;
                
                linesGroup.add(line);
            }
            linesGroup.position.y = 0.8;
            group.add(linesGroup);
            
            return group;
        }

        function createSonicEmitter() {
            const group = new THREE.Group();
            
            const baseGeometry = new THREE.CylinderGeometry(0.6, 0.8, 0.5, 16);
            const baseMaterial = new THREE.MeshPhongMaterial({ color: 0x222233 });
            const base = new THREE.Mesh(baseGeometry, baseMaterial);
            group.add(base);
            
            const dishGeometry = new THREE.SphereGeometry(0.7, 16, 16, 0, Math.PI * 2, 0, Math.PI / 2);
            const dishMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x333344,
                wireframe: true
            });
            const dish = new THREE.Mesh(dishGeometry, dishMaterial);
            dish.position.y = 0.5;
            dish.rotation.x = Math.PI;
            group.add(dish);
            
            const emitterGeometry = new THREE.CylinderGeometry(0.1, 0.3, 0.8, 8);
            const emitterMaterial = new THREE.MeshPhongMaterial({ color: 0xffcc00 });
            const emitter = new THREE.Mesh(emitterGeometry, emitterMaterial);
            emitter.position.y = 0.9;
            group.add(emitter);
            
            return group;
        }

        function createFreezeGrenade() {
            const group = new THREE.Group();
            
            const coreGeometry = new THREE.IcosahedronGeometry(0.7, 0);
            const coreMaterial = new THREE.MeshPhongMaterial({
                color: 0x00aaff,
                emissive: 0x003366,
                shininess: 100
            });
            const core = new THREE.Mesh(coreGeometry, coreMaterial);
            group.add(core);
            
            const ringsGroup = new THREE.Group();
            for (let i = 0; i < 3; i++) {
                const ringGeometry = new THREE.TorusGeometry(0.9 + i * 0.2, 0.05, 8, 24);
                const ringMaterial = new THREE.MeshPhongMaterial({ color: 0x00ffff });
                const ring = new THREE.Mesh(ringGeometry, ringMaterial);
                ring.rotation.x = Math.PI / 2;
                ringsGroup.add(ring);
            }
            group.add(ringsGroup);
            
            const spikesGroup = new THREE.Group();
            for (let i = 0; i < 12; i++) {
                const spikeGeometry = new THREE.ConeGeometry(0.05, 0.4, 4);
                const spikeMaterial = new THREE.MeshPhongMaterial({ color: 0x00ffff });
                const spike = new THREE.Mesh(spikeGeometry, spikeMaterial);
                
                const phi = Math.acos(-1 + (2 * i) / 12);
                const theta = Math.sqrt(12 * Math.PI) * phi;
                
                spike.position.x = 0.9 * Math.cos(theta) * Math.sin(phi);
                spike.position.y = 0.9 * Math.sin(theta) * Math.sin(phi);
                spike.position.z = 0.9 * Math.cos(phi);
                
                spike.lookAt(new THREE.Vector3(0, 0, 0));
                spike.rotateX(Math.PI / 2);
                
                spikesGroup.add(spike);
            }
            group.add(spikesGroup);
            
            return group;
        }

        function createExplosiveGel() {
            const group = new THREE.Group();
            
            const containerGeometry = new THREE.CylinderGeometry(0.8, 0.8, 1.2, 16);
            const containerMaterial = new THREE.MeshPhongMaterial({
                color: 0x884400,
                transparent: true,
                opacity: 0.7
            });
            const container = new THREE.Mesh(containerGeometry, containerMaterial);
            group.add(container);
            
            const gelGeometry = new THREE.SphereGeometry(0.6, 16, 16);
            const gelMaterial = new THREE.MeshPhongMaterial({
                color: 0xff6600,
                emissive: 0x442200
            });
            const gel = new THREE.Mesh(gelGeometry, gelMaterial);
            gel.position.y = 0.1;
            group.add(gel);
            
            const detonatorGeometry = new THREE.BoxGeometry(0.3, 0.3, 0.3);
            const detonatorMaterial = new THREE.MeshPhongMaterial({ color: 0xff0000 });
            const detonator = new THREE.Mesh(detonatorGeometry, detonatorMaterial);
            detonator.position.y = 0.9;
            group.add(detonator);
            
            return group;
        }

        function createEMPDevice() {
            const group = new THREE.Group();
            
            const bodyGeometry = new THREE.BoxGeometry(1.5, 0.8, 1);
            const bodyMaterial = new THREE.MeshPhongMaterial({ color: 0x111122 });
            const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
            group.add(body);
            
            const panelGeometry = new THREE.BoxGeometry(1.2, 0.1, 0.8);
            const panelMaterial = new THREE.MeshPhongMaterial({ color: 0x222244 });
            const panel = new THREE.Mesh(panelGeometry, panelMaterial);
            panel.position.y = 0.45;
            group.add(panel);
            
            const lightsGroup = new THREE.Group();
            for (let i = 0; i < 5; i++) {
                for (let j = 0; j < 3; j++) {
                    const lightGeometry = new THREE.BoxGeometry(0.15, 0.05, 0.15);
                    const lightMaterial = new THREE.MeshPhongMaterial({ 
                        color: i % 2 === 0 ? 0x00ff00 : 0xff0000
                    });
                    const light = new THREE.Mesh(lightGeometry, lightMaterial);
                    light.position.x = (i - 2) * 0.25;
                    light.position.z = (j - 1) * 0.25;
                    light.position.y = 0.5;
                    lightsGroup.add(light);
                }
            }
            group.add(lightsGroup);
            
            const antennaGeometry = new THREE.CylinderGeometry(0.03, 0.03, 0.8, 6);
            const antennaMaterial = new THREE.MeshPhongMaterial({ color: 0x444466 });
            const antenna = new THREE.Mesh(antennaGeometry, antennaMaterial);
            antenna.position.y = 0.9;
            antenna.rotation.x = Math.PI / 4;
            group.add(antenna);
            
            return group;
        }

        function showWeapon(index) {
            if (currentWeapon !== null) {
                weapons[currentWeapon].visible = false;
            }
            
            weapons[index].visible = true;
            currentWeapon = index;
            
            document.querySelectorAll('.weapon-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-id="${index}"]`).classList.add('active');
            
            camera.position.set(0, 0, 12);
            controls.reset();
        }

        function showWeaponModal(index) {
            const data = weaponData[index];
            
            document.getElementById('modalIcon').textContent = data.icon;
            document.getElementById('modalTitle').textContent = data.name;
            document.getElementById('modalDescription').textContent = data.description;
            document.getElementById('statDamage').textContent = data.stats.damage + '%';
            document.getElementById('statAccuracy').textContent = data.stats.accuracy + '%';
            document.getElementById('statStealth').textContent = data.stats.stealth + '%';
            
            document.getElementById('weaponModal').style.display = 'block';
            
            showWeapon(index);
        }

        function setupEventListeners() {
            document.querySelectorAll('.weapon-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = parseInt(btn.dataset.id);
                    showWeaponModal(id);
                });
            });

            document.getElementById('infoBtn').addEventListener('click', () => {
                if (currentWeapon !== null) {
                    showWeaponModal(currentWeapon);
                }
            });

            document.getElementById('rotateBtn').addEventListener('click', function() {
                autoRotate = !autoRotate;
                controls.autoRotate = autoRotate;
                this.style.background = autoRotate ? '#ffcc00' : 'rgba(20, 20, 30, 0.8)';
                this.style.color = autoRotate ? '#000' : '#ffcc00';
            });

            document.getElementById('resetBtn').addEventListener('click', () => {
                camera.position.set(0, 0, 12);
                controls.reset();
            });

            document.getElementById('closeModal').addEventListener('click', () => {
                document.getElementById('weaponModal').style.display = 'none';
            });

            document.getElementById('weaponModal').addEventListener('click', (e) => {
                if (e.target === document.getElementById('weaponModal')) {
                    document.getElementById('weaponModal').style.display = 'none';
                }
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    document.getElementById('weaponModal').style.display = 'none';
                }
            });
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            requestAnimationFrame(animate);
            
            time += 0.016;
            
            if (currentWeapon !== null && weapons[currentWeapon]) {
                const weapon = weapons[currentWeapon];
                
                weapon.rotation.y += 0.01;
                
                const float = Math.sin(time * 2) * 0.1;
                weapon.position.y = float;
                
                const pulse = Math.sin(time * 3) * 0.05 + 0.95;
                weapon.scale.set(pulse, pulse, pulse);
            }
            
            controls.update();
            renderer.render(scene, camera);
        }

        init();
    </script>
</body>
</html>
